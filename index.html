<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplication Table</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text x='50%' y='50%' font-size='60' text-anchor='middle' dominant-baseline='middle'>9Ã—9</text></svg>">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            color: #0066cc; /* æ–‡å­—è‰²ã‚’é’ã«å¤‰æ›´ */
        }
        .logo {
            font-size: 48px;
            margin: 10px 0;
            font-weight: bold;
        }
        .language-switcher {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 10px 0;
        }
        .language-btn {
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: white;
            cursor: pointer;
            color: #0066cc; /* ãƒœã‚¿ãƒ³æ–‡å­—è‰²ã‚‚é’ã« */
        }
        .language-btn.active {
            background: #0066cc; /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒœã‚¿ãƒ³ã®èƒŒæ™¯è‰² */
            color: white;
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
            flex-grow: 1;
        }
        .grid-btn {
            aspect-ratio: 1;
            font-size: 24px;
            border: none;
            border-radius: 15px;
            background-color: white;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #0066cc; /* ãƒœã‚¿ãƒ³æ–‡å­—è‰²ã‚’é’ã« */
        }
        .grid-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            background-color: #e6f0ff; /* ãƒ›ãƒãƒ¼æ™‚ã®è–„ã„é’èƒŒæ™¯ */
        }
        .grid-btn:active {
            transform: translateY(0);
        }
        .back-btn {
            padding: 10px 20px;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            background-color: #e6f0ff; /* è–„ã„é’èƒŒæ™¯ */
            cursor: pointer;
            margin: 20px 0;
            color: #0066cc;
        }
        .screen {
            display: none;
            flex-direction: column;
            flex-grow: 1;
        }
        .active {
            display: flex;
        }
        .current-table {
            font-size: 24px;
            margin: 10px 0;
        }
        footer {
            margin-top: auto;
            padding: 20px 0;
            font-size: 14px;
        }
        .email-link {
            color: #0066cc;
            text-decoration: none;
        }
        .sound-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #0066cc;
            color: white;
            border: none;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        /* ç­”ãˆè¡¨ç¤ºã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #question-display {
            font-size: 48px;
            margin: 30px 0;
        }
        #correct-answer {
            font-size: 72px;
            color: #0066cc;
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <!-- è¨€èªã‚¹ã‚¤ãƒƒãƒãƒ£ãƒ¼ -->
    <div class="language-switcher">
        <button class="language-btn active" data-lang="en">English</button>
        <button class="language-btn" data-lang="zh">ä¸­æ–‡</button>
        <button class="language-btn" data-lang="ja">æ—¥æœ¬èª</button>
    </div>

    <!-- æ®µé¸æŠç”»é¢ -->
    <div class="screen active" id="menu-screen">
        <div class="logo">9Ã—9</div>
        <div class="current-table" id="menu-title">Select a table</div>
        <div class="grid-container" id="table-grid">
            <!-- 1-9ã®æ•°å­—ãƒœã‚¿ãƒ³ãŒã“ã“ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
        </div>
    </div>

    <!-- å•é¡Œé¸æŠç”»é¢ -->
    <div class="screen" id="problem-screen">
        <div class="logo">9Ã—9</div>
        <div class="current-table" id="current-table-display"></div>
        <div class="grid-container" id="problem-grid">
            <!-- å•é¡Œãƒœã‚¿ãƒ³ãŒã“ã“ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
        </div>
        <button class="back-btn" id="back-to-menu">â†</button>
    </div>

    <!-- ç­”ãˆè¡¨ç¤ºç”»é¢ -->
    <div class="screen" id="answer-screen">
        <div class="logo">9Ã—9</div>
        <div class="current-table" id="answer-table-display"></div>
        <div id="question-display"></div>
        <div id="correct-answer"></div>
        <button class="back-btn" id="back-to-problem">â†</button>
    </div>

    <!-- éŸ³å£°ãƒœã‚¿ãƒ³ -->
    <button class="sound-btn" id="sound-btn">ğŸ”Š</button>

    <footer>
        <span id="contact-text">Contact us</span><br>
        <a href="mailto:mementomorikatsu@gmail.com" class="email-link">mementomorikatsu@gmail.com</a>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // å¤šè¨€èªå¯¾å¿œãƒ†ã‚­ã‚¹ãƒˆ
            const translations = {
                en: {
                    menuTitle: "Select a table",
                    back: "Back",
                    contact: "Contact us",
                    tableTitle: "Times Table"
                },
                zh: {
                    menuTitle: "é€‰æ‹©ä¹˜æ³•è¡¨",
                    back: "è¿”å›",
                    contact: "è”ç³»æˆ‘ä»¬",
                    tableTitle: "çš„ä¹˜æ³•è¡¨"
                },
                ja: {
                    menuTitle: "æ®µã‚’é¸ã‚“ã§ãã ã•ã„",
                    back: "æˆ»ã‚‹",
                    contact: "ãŠå•ã„åˆã‚ã›",
                    tableTitle: "ã®æ®µ"
                }
            };

            // æ•°å­—ã®å¤šè¨€èªè¡¨ç¾
            const numberTexts = {
                en: ["Zero", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine"],
                zh: ["é›¶", "ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­", "ä¸ƒ", "å…«", "ä¹"],
                ja: ["ã€‡", "ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­", "ä¸ƒ", "å…«", "ä¹"]
            };

            // ç¾åœ¨ã®è¨€èª (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯è‹±èª)
            let currentLang = 'en';
            
            // éŸ³å£°åˆæˆè¨­å®š
            const synth = window.speechSynthesis;
            let voices = [];
            let voice = null;

            // éŸ³å£°ã®æº–å‚™
            function loadVoices() {
                voices = synth.getVoices();
                // è¨€èªã«åˆã£ãŸéŸ³å£°ã‚’é¸æŠ
                if (currentLang === 'ja') {
                    voice = voices.find(v => v.lang === 'ja-JP');
                } else if (currentLang === 'zh') {
                    voice = voices.find(v => v.lang === 'zh-CN' || v.lang === 'zh-TW');
                } else {
                    voice = voices.find(v => v.lang === 'en-US' || v.lang === 'en-GB');
                }
                
                // é©åˆ‡ãªéŸ³å£°ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯æœ€åˆã®éŸ³å£°ã‚’ä½¿ç”¨
                if (!voice && voices.length > 0) {
                    voice = voices[0];
                }
            }

            // éŸ³å£°ãŒåˆ©ç”¨å¯èƒ½ã«ãªã£ãŸã‚‰ãƒ­ãƒ¼ãƒ‰
            if (synth.onvoiceschanged !== undefined) {
                synth.onvoiceschanged = loadVoices;
            }

            // åˆæœŸãƒ­ãƒ¼ãƒ‰
            loadVoices();

            // ãƒ†ã‚­ã‚¹ãƒˆã‚’éŸ³å£°ã§èª­ã¿ä¸Šã’ã‚‹
            function speak(text) {
                if (synth.speaking) {
                    synth.cancel();
                }

                if (text && voice) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.voice = voice;
                    utterance.rate = 0.9;
                    synth.speak(utterance);
                }
            }

            // è¦ç´ å–å¾—
            const menuScreen = document.getElementById('menu-screen');
            const problemScreen = document.getElementById('problem-screen');
            const answerScreen = document.getElementById('answer-screen');
            const tableGrid = document.getElementById('table-grid');
            const problemGrid = document.getElementById('problem-grid');
            const currentTableDisplay = document.getElementById('current-table-display');
            const answerTableDisplay = document.getElementById('answer-table-display');
            const questionDisplay = document.getElementById('question-display');
            const correctAnswer = document.getElementById('correct-answer');
            const backToMenuBtn = document.getElementById('back-to-menu');
            const backToProblemBtn = document.getElementById('back-to-problem');
            const menuTitle = document.getElementById('menu-title');
            const contactText = document.getElementById('contact-text');
            const soundBtn = document.getElementById('sound-btn');
            const languageBtns = document.querySelectorAll('.language-btn');

            // è¨€èªåˆ‡ã‚Šæ›¿ãˆ
            languageBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    currentLang = this.dataset.lang;
                    
                    // ãƒœã‚¿ãƒ³ã®activeçŠ¶æ…‹ã‚’æ›´æ–°
                    languageBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // UIãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°
                    updateUITexts();
                    
                    // ç¾åœ¨ã®ç”»é¢ã«å¿œã˜ã¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å†ç”Ÿæˆ
                    if (menuScreen.classList.contains('active')) {
                        generateTableButtons();
                    } else if (problemScreen.classList.contains('active')) {
                        const table = parseInt(currentTableDisplay.textContent.split('Ã—')[0].trim());
                        showProblemScreen(table);
                    }
                });
            });

            // UIãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°
            function updateUITexts() {
                menuTitle.textContent = translations[currentLang].menuTitle;
                backToMenuBtn.textContent = translations[currentLang].back;
                backToProblemBtn.textContent = translations[currentLang].back;
                contactText.textContent = translations[currentLang].contact;
            }

            // æ®µé¸æŠãƒœã‚¿ãƒ³ç”Ÿæˆ (ã‚·ãƒ³ãƒ—ãƒ«ãª1-9ã®æ•°å­—)
            function generateTableButtons() {
                tableGrid.innerHTML = '';
                
                for (let i = 1; i <= 9; i++) {
                    const btn = document.createElement('button');
                    btn.className = 'grid-btn';
                    btn.textContent = i; // ã‚·ãƒ³ãƒ—ãƒ«ã«æ•°å­—ã®ã¿è¡¨ç¤º
                    btn.dataset.table = i;
                    btn.addEventListener('click', function() {
                        const table = parseInt(this.dataset.table);
                        showProblemScreen(table);
                    });
                    tableGrid.appendChild(btn);
                }
            }

            // å•é¡Œé¸æŠç”»é¢ã‚’è¡¨ç¤º
            function showProblemScreen(table) {
                let tableText = '';
                if (currentLang === 'ja') {
                    tableText = `${numberTexts.ja[table]}${translations.ja.tableTitle}`;
                } else if (currentLang === 'zh') {
                    tableText = `${numberTexts.zh[table]}${translations.zh.tableTitle}`;
                } else {
                    tableText = `${numberTexts.en[table]} ${translations.en.tableTitle}`;
                }
                
                currentTableDisplay.textContent = tableText;
                problemGrid.innerHTML = '';
                
                // å•é¡Œãƒœã‚¿ãƒ³ç”Ÿæˆ (Ã—1ã‹ã‚‰Ã—9)
                for (let i = 1; i <= 9; i++) {
                    const btn = document.createElement('button');
                    btn.className = 'grid-btn';
                    btn.textContent = `${table}Ã—${i}`; // å•é¡Œå½¢å¼ã§è¡¨ç¤º
                    btn.dataset.multiplier = i;
                    btn.addEventListener('click', function() {
                        const multiplier = parseInt(this.dataset.multiplier);
                        showAnswerScreen(table, multiplier);
                    });
                    problemGrid.appendChild(btn);
                }
                
                menuScreen.classList.remove('active');
                answerScreen.classList.remove('active');
                problemScreen.classList.add('active');
            }
            
            // ç­”ãˆè¡¨ç¤ºç”»é¢ã‚’è¡¨ç¤º
            function showAnswerScreen(table, multiplier) {
                let tableText = '';
                if (currentLang === 'ja') {
                    tableText = `${numberTexts.ja[table]}${translations.ja.tableTitle}`;
                } else if (currentLang === 'zh') {
                    tableText = `${numberTexts.zh[table]}${translations.zh.tableTitle}`;
                } else {
                    tableText = `${numberTexts.en[table]} ${translations.en.tableTitle}`;
                }
                
                answerTableDisplay.textContent = tableText;
                questionDisplay.textContent = `${table} Ã— ${multiplier} = ?`;
                correctAnswer.textContent = table * multiplier;
                
                // éŸ³å£°ã§å•é¡Œã¨ç­”ãˆã‚’èª­ã¿ä¸Šã’
                if (currentLang === 'ja') {
                    speak(`${table} ã‹ã‘ã‚‹ ${multiplier} ã¯ ${table * multiplier}`);
                } else if (currentLang === 'zh') {
                    speak(`${table} ä¹˜ä»¥ ${multiplier} ç­‰äº ${table * multiplier}`);
                } else {
                    speak(`${table} times ${multiplier} is ${table * multiplier}`);
                }
                
                problemScreen.classList.remove('active');
                menuScreen.classList.remove('active');
                answerScreen.classList.add('active');
            }
            
            // æˆ»ã‚‹ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ
            backToMenuBtn.addEventListener('click', function() {
                problemScreen.classList.remove('active');
                answerScreen.classList.remove('active');
                menuScreen.classList.add('active');
            });
            
            backToProblemBtn.addEventListener('click', function() {
                const table = parseInt(answerTableDisplay.textContent.split('Ã—')[0]);
                answerScreen.classList.remove('active');
                problemScreen.classList.add('active');
            });

            // éŸ³å£°ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ
            soundBtn.addEventListener('click', function() {
                if (answerScreen.classList.contains('active')) {
                    const table = parseInt(answerTableDisplay.textContent.split('Ã—')[0]);
                    const multiplier = parseInt(questionDisplay.textContent.split('Ã—')[1].split('=')[0].trim());
                    
                    if (currentLang === 'ja') {
                        speak(`${table} ã‹ã‘ã‚‹ ${multiplier} ã¯ ${table * multiplier}`);
                    } else if (currentLang === 'zh') {
                        speak(`${table} ä¹˜ä»¥ ${multiplier} ç­‰äº ${table * multiplier}`);
                    } else {
                        speak(`${table} times ${multiplier} is ${table * multiplier}`);
                    }
                }
            });

            // åˆæœŸåŒ–
            generateTableButtons();
            updateUITexts();
        });
    </script>
</body>
</html>