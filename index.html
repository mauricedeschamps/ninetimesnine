<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplication Table</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text x='50%' y='50%' font-size='60' text-anchor='middle' dominant-baseline='middle'>9√ó9</text></svg>">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .logo {
            font-size: 48px;
            margin: 10px 0;
            font-weight: bold;
            color: #1a73e8; /* Blue color */
        }
        .language-switcher {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 10px 0;
        }
        .language-btn {
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: white;
            cursor: pointer;
        }
        .language-btn.active {
            background: #1a73e8; /* Blue color */
            color: white;
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
            flex-grow: 1;
        }
        .grid-btn {
            aspect-ratio: 1;
            font-size: 24px;
            border: none;
            border-radius: 15px;
            background-color: white;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1a73e8; /* Blue color */
        }
        .grid-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .grid-btn:active {
            transform: translateY(0);
        }
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        .nav-btn {
            padding: 10px 20px;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            background-color: #f0f0f0;
            cursor: pointer;
        }
        .continue-btn {
            background-color: #1a73e8; /* Blue color */
            color: white;
        }
        .screen {
            display: none;
            flex-direction: column;
            flex-grow: 1;
        }
        .active {
            display: flex;
        }
        .current-table {
            font-size: 24px;
            margin: 10px 0;
            color: #1a73e8; /* Blue color */
        }
        footer {
            margin-top: auto;
            padding: 20px 0;
            font-size: 14px;
            color: #666;
        }
        .email-link {
            color: #1a73e8; /* Blue color */
            text-decoration: none;
        }
        .sound-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #1a73e8; /* Blue color */
            color: white;
            border: none;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <!-- Ë®ÄË™û„Çπ„Ç§„ÉÉ„ÉÅ„É£„Éº -->
    <div class="language-switcher">
        <button class="language-btn active" data-lang="en">English</button>
        <button class="language-btn" data-lang="zh">‰∏≠Êñá</button>
        <button class="language-btn" data-lang="ja">Êó•Êú¨Ë™û</button>
    </div>

    <!-- ÊÆµÈÅ∏ÊäûÁîªÈù¢ -->
    <div class="screen active" id="menu-screen">
        <div class="logo">9√ó9</div>
        <div class="current-table" id="menu-title">Select a table</div>
        <div class="grid-container" id="table-grid">
            <!-- 1-9„ÅÆÊÆµ„Éú„Çø„É≥„Åå„Åì„Åì„Å´ÁîüÊàê„Åï„Çå„Åæ„Åô -->
        </div>
    </div>

    <!-- ÂïèÈ°åÈÅ∏ÊäûÁîªÈù¢ -->
    <div class="screen" id="problem-screen">
        <div class="logo">9√ó9</div>
        <div class="current-table" id="current-table-display"></div>
        <div class="grid-container" id="problem-grid">
            <!-- ÂïèÈ°å„Éú„Çø„É≥„Åå„Åì„Åì„Å´ÁîüÊàê„Åï„Çå„Åæ„Åô -->
        </div>
        <div class="nav-buttons">
            <button class="nav-btn" id="back-to-menu">‚Üê Back</button>
            <div></div> <!-- Spacer -->
        </div>
    </div>

    <!-- Á≠î„ÅàË°®Á§∫ÁîªÈù¢ -->
    <div class="screen" id="answer-screen">
        <div class="logo">9√ó9</div>
        <div class="current-table" id="answer-table-display"></div>
        <div style="font-size: 48px; margin: 30px 0; color: #1a73e8;" id="question-display"></div>
        <div style="font-size: 72px; color: #1a73e8; margin-bottom: 30px;" id="correct-answer"></div>
        <div class="nav-buttons">
            <button class="nav-btn" id="back-to-problem">‚Üê Back</button>
            <button class="nav-btn continue-btn" id="continue-btn">Continue ‚Üí</button>
        </div>
    </div>

    <!-- Èü≥Â£∞„Éú„Çø„É≥ -->
    <button class="sound-btn" id="sound-btn">üîä</button>

    <footer>
        <span id="contact-text">Contact us</span><br>
        <a href="mailto:mementomorikatsu@gmail.com" class="email-link">mementomorikatsu@gmail.com</a>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Â§öË®ÄË™ûÂØæÂøú„ÉÜ„Ç≠„Çπ„Éà
            const translations = {
                en: {
                    menuTitle: "Select a table (1-9)",
                    back: "Back",
                    continue: "Continue",
                    contact: "Contact us"
                },
                zh: {
                    menuTitle: "ÈÄâÊã©‰πòÊ≥ïË°® (1-9)",
                    back: "ËøîÂõû",
                    continue: "ÁªßÁª≠",
                    contact: "ËÅîÁ≥ªÊàë‰ª¨"
                },
                ja: {
                    menuTitle: "ÊÆµ„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ (1-9)",
                    back: "Êàª„Çã",
                    continue: "Á∂ö„Åë„Çã",
                    contact: "„ÅäÂïè„ÅÑÂêà„Çè„Åõ"
                }
            };

            // Êï∞Â≠ó„ÅÆÂ§öË®ÄË™ûË°®Áèæ
            const numberTexts = {
                en: ["Zero", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine"],
                zh: ["Èõ∂", "‰∏Ä", "‰∫å", "‰∏â", "Âõõ", "‰∫î", "ÂÖ≠", "‰∏É", "ÂÖ´", "‰πù"],
                ja: ["„Äá", "‰∏Ä", "‰∫å", "‰∏â", "Âõõ", "‰∫î", "ÂÖ≠", "‰∏É", "ÂÖ´", "‰πù"]
            };

            // ÁèæÂú®„ÅÆË®ÄË™û („Éá„Éï„Ç©„É´„Éà„ÅØËã±Ë™û)
            let currentLang = 'en';
            
            // ÁèæÂú®„ÅÆÂïèÈ°åÊÉÖÂ†±
            let currentTable = 1;
            let currentMultiplier = 1;
            
            // Èü≥Â£∞ÂêàÊàêË®≠ÂÆö
            const synth = window.speechSynthesis;
            let voices = [];
            let voice = null;

            // Èü≥Â£∞„ÅÆÊ∫ñÂÇô
            function loadVoices() {
                voices = synth.getVoices();
                // Ë®ÄË™û„Å´Âêà„Å£„ÅüÈü≥Â£∞„ÇíÈÅ∏Êäû
                if (currentLang === 'ja') {
                    voice = voices.find(v => v.lang === 'ja-JP');
                } else if (currentLang === 'zh') {
                    voice = voices.find(v => v.lang === 'zh-CN' || v.lang === 'zh-TW');
                } else {
                    voice = voices.find(v => v.lang === 'en-US' || v.lang === 'en-GB');
                }
                
                // ÈÅ©Âàá„Å™Èü≥Â£∞„ÅåË¶ã„Å§„Åã„Çâ„Å™„ÅÑÂ†¥Âêà„ÅØÊúÄÂàù„ÅÆÈü≥Â£∞„Çí‰ΩøÁî®
                if (!voice && voices.length > 0) {
                    voice = voices[0];
                }
            }

            // Èü≥Â£∞„ÅåÂà©Áî®ÂèØËÉΩ„Å´„Å™„Å£„Åü„Çâ„É≠„Éº„Éâ
            if (synth.onvoiceschanged !== undefined) {
                synth.onvoiceschanged = loadVoices;
            }

            // ÂàùÊúü„É≠„Éº„Éâ
            loadVoices();

            // „ÉÜ„Ç≠„Çπ„Éà„ÇíÈü≥Â£∞„ÅßË™≠„Åø‰∏ä„Åí„Çã
            function speak(text) {
                if (synth.speaking) {
                    synth.cancel();
                }

                if (text && voice) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.voice = voice;
                    utterance.rate = 0.9;
                    
                    // Ë®ÄË™û„Åî„Å®„Å´Áô∫Èü≥„ÇíË™øÊï¥
                    if (currentLang === 'en') {
                        utterance.lang = 'en-US';
                        utterance.text = text.replace(/√ó/g, ' times ').replace(/=/g, ' is ');
                    } else if (currentLang === 'zh') {
                        utterance.lang = 'zh-CN';
                        utterance.text = text.replace(/√ó/g, ' ‰πò‰ª• ').replace(/=/g, ' Á≠â‰∫é ');
                    } else if (currentLang === 'ja') {
                        utterance.lang = 'ja-JP';
                        utterance.text = text.replace(/√ó/g, ' „Åã„Åë„Çã ').replace(/=/g, ' „ÅØ ');
                    }
                    
                    synth.speak(utterance);
                }
            }

            // Ë¶ÅÁ¥†ÂèñÂæó
            const menuScreen = document.getElementById('menu-screen');
            const problemScreen = document.getElementById('problem-screen');
            const answerScreen = document.getElementById('answer-screen');
            const tableGrid = document.getElementById('table-grid');
            const problemGrid = document.getElementById('problem-grid');
            const currentTableDisplay = document.getElementById('current-table-display');
            const answerTableDisplay = document.getElementById('answer-table-display');
            const questionDisplay = document.getElementById('question-display');
            const correctAnswer = document.getElementById('correct-answer');
            const backToMenuBtn = document.getElementById('back-to-menu');
            const backToProblemBtn = document.getElementById('back-to-problem');
            const continueBtn = document.getElementById('continue-btn');
            const menuTitle = document.getElementById('menu-title');
            const contactText = document.getElementById('contact-text');
            const soundBtn = document.getElementById('sound-btn');
            const languageBtns = document.querySelectorAll('.language-btn');

            // Ë®ÄË™ûÂàá„ÇäÊõø„Åà
            languageBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    currentLang = this.dataset.lang;
                    
                    // „Éú„Çø„É≥„ÅÆactiveÁä∂ÊÖã„ÇíÊõ¥Êñ∞
                    languageBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // UI„ÉÜ„Ç≠„Çπ„Éà„ÇíÊõ¥Êñ∞
                    updateUITexts();
                    
                    // ÁèæÂú®„ÅÆÁîªÈù¢„Å´Âøú„Åò„Å¶„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíÂÜçÁîüÊàê
                    if (menuScreen.classList.contains('active')) {
                        generateTableButtons();
                    } else if (problemScreen.classList.contains('active')) {
                        showProblemScreen(currentTable);
                    } else if (answerScreen.classList.contains('active')) {
                        showAnswerScreen(currentTable, currentMultiplier);
                    }
                });
            });

            // UI„ÉÜ„Ç≠„Çπ„Éà„ÇíÊõ¥Êñ∞
            function updateUITexts() {
                menuTitle.textContent = translations[currentLang].menuTitle;
                backToMenuBtn.textContent = translations[currentLang].back;
                backToProblemBtn.textContent = translations[currentLang].back;
                continueBtn.textContent = translations[currentLang].continue;
                contactText.textContent = translations[currentLang].contact;
            }

            // ÊÆµÈÅ∏Êäû„Éú„Çø„É≥ÁîüÊàê (1-9„ÅÆÊÆµ)
            function generateTableButtons() {
                tableGrid.innerHTML = '';
                
                for (let i = 1; i <= 9; i++) {
                    const btn = document.createElement('button');
                    btn.className = 'grid-btn';
                    btn.textContent = `${i}√ó${i}`;
                    btn.dataset.table = i;
                    btn.addEventListener('click', function() {
                        const table = parseInt(this.dataset.table);
                        currentTable = table;
                        showProblemScreen(table);
                    });
                    tableGrid.appendChild(btn);
                }
            }

            // ÂïèÈ°åÈÅ∏ÊäûÁîªÈù¢„ÇíË°®Á§∫
            function showProblemScreen(table) {
                let tableText = '';
                if (currentLang === 'ja') {
                    tableText = `${table}„ÅÆÊÆµ`;
                } else if (currentLang === 'zh') {
                    tableText = `${table}ÁöÑ‰πòÊ≥ïË°®`;
                } else {
                    tableText = `${table} Times Table`;
                }
                
                currentTableDisplay.textContent = tableText;
                problemGrid.innerHTML = '';
                
                // ÂïèÈ°å„Éú„Çø„É≥ÁîüÊàê (√ó1„Åã„Çâ√ó9)
                for (let i = 1; i <= 9; i++) {
                    const btn = document.createElement('button');
                    btn.className = 'grid-btn';
                    btn.textContent = `${table}√ó${i}`;
                    btn.dataset.multiplier = i;
                    btn.addEventListener('click', function() {
                        const multiplier = parseInt(this.dataset.multiplier);
                        currentMultiplier = multiplier;
                        showAnswerScreen(table, multiplier);
                    });
                    problemGrid.appendChild(btn);
                }
                
                menuScreen.classList.remove('active');
                answerScreen.classList.remove('active');
                problemScreen.classList.add('active');
            }
            
            // Á≠î„ÅàË°®Á§∫ÁîªÈù¢„ÇíË°®Á§∫
            function showAnswerScreen(table, multiplier) {
                let tableText = '';
                if (currentLang === 'ja') {
                    tableText = `${table}„ÅÆÊÆµ`;
                } else if (currentLang === 'zh') {
                    tableText = `${table}ÁöÑ‰πòÊ≥ïË°®`;
                } else {
                    tableText = `${table} Times Table`;
                }
                
                answerTableDisplay.textContent = tableText;
                questionDisplay.textContent = `${table} √ó ${multiplier} = ?`;
                correctAnswer.textContent = table * multiplier;
                
                // Èü≥Â£∞„ÅßÂïèÈ°å„Å®Á≠î„Åà„ÇíË™≠„Åø‰∏ä„Åí
                speak(`${table} √ó ${multiplier} = ${table * multiplier}`);
                
                problemScreen.classList.remove('active');
                menuScreen.classList.remove('active');
                answerScreen.classList.add('active');
            }
            
            // Êàª„Çã„Éú„Çø„É≥„ÅÆ„Ç§„Éô„É≥„Éà
            backToMenuBtn.addEventListener('click', function() {
                problemScreen.classList.remove('active');
                answerScreen.classList.remove('active');
                menuScreen.classList.add('active');
            });
            
            backToProblemBtn.addEventListener('click', function() {
                answerScreen.classList.remove('active');
                problemScreen.classList.add('active');
            });

            // Á∂ö„Åë„Çã„Éú„Çø„É≥„ÅÆ„Ç§„Éô„É≥„Éà
            continueBtn.addEventListener('click', function() {
                currentMultiplier = currentMultiplier < 9 ? currentMultiplier + 1 : 1;
                showAnswerScreen(currentTable, currentMultiplier);
            });

            // Èü≥Â£∞„Éú„Çø„É≥„ÅÆ„Ç§„Éô„É≥„Éà
            soundBtn.addEventListener('click', function() {
                if (answerScreen.classList.contains('active')) {
                    speak(`${currentTable} √ó ${currentMultiplier} = ${currentTable * currentMultiplier}`);
                }
            });

            // ÂàùÊúüÂåñ
            generateTableButtons();
            updateUITexts();
        });
    </script>
</body>
</html>